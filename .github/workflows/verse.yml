name: Verse of the Day to Multiple Discords

on:
  workflow_dispatch:
  schedule:
    - cron: "0 11 * * *" # 7:00 AM Eastern

jobs:
  post-verse:
    runs-on: ubuntu-latest
    steps:
      - name: Post Verse of the Day (custom per Discord)
        env:
          DISCORD_WEBHOOK_MAIN: ${{ secrets.DISCORD_WEBHOOK_MAIN }}
          DISCORD_WEBHOOK_TWO: ${{ secrets.DISCORD_WEBHOOK_TWO }}
          DISCORD_WEBHOOK_THREE: ${{ secrets.DISCORD_WEBHOOK_THREE }}
        run: |
          VERSE=$(curl -s https://beta.ourmanna.com/api/v1/get/?format=text)

          MESSAGE_MAIN="ğŸ“– **Verse of the Day**\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”\n$VERSE\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ™ Take a moment to reflect."

          MESSAGE_TWO="ğŸ™ **Daily Scripture**\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”\n$VERSE\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ•Šï¸ Be encouraged today."

          MESSAGE_THREE="âœ¨ **Scripture for Today**\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”\n$VERSE\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ’¬ Feel free to share your thoughts."

          curl -X POST -H "Content-Type: application/json" \
            -d "{\"content\":\"$MESSAGE_MAIN\"}" \
            "$DISCORD_WEBHOOK_MAIN"

          curl -X POST -H "Content-Type: application/json" \
            -d "{\"content\":\"$MESSAGE_TWO\"}" \
            "$DISCORD_WEBHOOK_TWO"

          curl -X POST -H "Content-Type: application/json" \
            -d "{\"content\":\"$MESSAGE_THREE\"}" \
            "$DISCORD_WEBHOOK_THREE"
