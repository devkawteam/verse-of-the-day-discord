name: Verse of the Day to Multiple Discords

on:
  workflow_dispatch:
  schedule:
    - cron: "0 11 * * *" # 7:00 AM Eastern

jobs:
  post-verse:
    runs-on: ubuntu-latest
    steps:
      - name: Post Verse of the Day
        env:
          DISCORD_WEBHOOK_MAIN: ${{ secrets.DISCORD_WEBHOOK_MAIN }}
          DISCORD_WEBHOOK_TWO: ${{ secrets.DISCORD_WEBHOOK_TWO }}
          DISCORD_WEBHOOK_THREE: ${{ secrets.DISCORD_WEBHOOK_THREE }}
        run: |
          VERSE=$(curl -s https://beta.ourmanna.com/api/v1/get/?format=text)

          curl -X POST \
            -H "Content-Type: application/json" \
            -d "{\"content\":\"ðŸ“– **Verse of the Day**\n\n$VERSE\"}" \
            "$DISCORD_WEBHOOK_MAIN"

          curl -X POST \
            -H "Content-Type: application/json" \
            -d "{\"content\":\"ðŸ“– **Verse of the Day**\n\n$VERSE\"}" \
            "$DISCORD_WEBHOOK_TWO"

          curl -X POST \
            -H "Content-Type: application/json" \
            -d "{\"content\":\"ðŸ“– **Verse of the Day**\n\n$VERSE\"}" \
            "$DISCORD_WEBHOOK_THREE"
